@addTagHelper *, Blazor.Widgetised
@using Blazor.Widgetised.Components
@inherits SystemComponent

<div class="layout">
    <div class="row-main">
        <div class="display-area column-left">
            <Container Key="LEFT">
                <p><mark>Left</mark> side container.</p>
            </Container>
        </div>
        <div class="column-main">
            <div class="control">
                <select id="select-container" bind="@TargetContainer">
                    <option value="LEFT">left</option>
                    <option value="MAIN" selected>main</option>
                    <option value="BOTTOM_FIRST">bottom left</option>
                    <option value="BOTTOM_SECOND">bottom center</option>
                    <option value="BOTTOM_THIRD">bottom right</option>
                </select>
                <select id="select-widget" bind="@TargetWidgetVariant">
                    <option value="delete">- delete -</option>
                    <option value="@WidgetVariants.TEXT_FIRST" selected>text widget</option>
                    <option value="@WidgetVariants.RANDOM_UPDATER">updater widget</option>
                    <option value="@WidgetVariants.COUNTER">counter widget</option>
                </select>
                <button onclick="@ProcessOperation">Process</button>
            </div>
            <div class="display-area content">
                <Container Key="MAIN">
                    <p>The <strong>main</strong> container.</p>
                </Container>
            </div>
        </div>
    </div> 
    <div class="row-bottom">
        <div class="display-area column-first">
            <Container Key="BOTTOM_FIRST">
                <p>Bottom <i>left</i> container.</p>
            </Container>
        </div>
        <div class="display-area column-second">
            <Container Key="BOTTOM_SECOND">
                <p>Bottom <i>center</i> container.</p>
            </Container>
        </div>
        <div class="display-area column-third">
            <Container Key="BOTTOM_THIRD">
                <p>Bottom <i>right</i> container.</p>
            </Container>
        </div>
    </div>
</div>

@functions
{
    private string TargetContainer { get; set; }

    private string TargetWidgetVariant { get; set; }

    void ProcessOperation()
    {
        InteractionPipe.Send<LayoutOperationMessage>(new LayoutOperationMessage
        {
            TargetContainer = TargetContainer,
            TargetWidgetVariant = TargetWidgetVariant
        });
    }
}
